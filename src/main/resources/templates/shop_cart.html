<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cart</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="code.js"></script>
</head>
<body>
    <nav>
        <ul>
            <li><a class="cartImage" href="/cart"><img src="images/cart.png" alt="Shopping Cart"></a></li>
            <li><a th:href="@{(${credentials == null} ? '/login_signup': '/logout')}" th:text="${credentials} ? 'LogOut' : 'Sign up/Login'"></a></li>
            <li><a href="/profile">Profile</a></li>
            <div class="dropdown">
                <button class="dropButton" href="#products">Products</button>
                <div class="dropdownContent">
                    <a href="/products">Tables</a>
                    <a href="/products">Chairs</a>
                    <a href="/products">Couches</a>
                </div>
            </div>
            <li style="float: left"><a class ="logo" href="/">StayAtHomies</a></li>
        </ul>
    </nav>

    <div class="container cart_container">
        <th:block>

        </th:block>
        <p id="cart_header">Shopping Cart</p>
        <div class="cart_items_panels">
            <th:block th:each="item: ${shop_cart.cartItems}">
                <dev class="cart_item" th:id="|cart_item_${item.id}|">
                    <div id="cart_item_img">
                        <img th:src="@{(|/images/${#strings.arraySplit(item.product.photos, '#')[0]}|)}" th:alt="${item.product.title}"/>
                    </div>
                    <div id="cart_item_details">
                        <p id="cart_item_title" th:text="${item.product.title}"></p>
                        <p id="cart_item_price" th:text="|Price: &euro;${item.product.price}|"></p>
                        <p id="cart_item_qty" th:text="|Qty: ${item.quantity}|"></p>
                        <p id="cart_item_subtot" th:text="|Subtotal: &euro;${item.subtotal}|"></p>
                        <button id="item_remove_btn" th:onclick="|removeProduct(${item.id})|">Remove</button>
                    </div>
                </dev>
            </th:block>
        </div>
        <div id="cart_sidepanel">
            <h3>Total: <span th:text="|&euro; ${shop_cart.total}|"> </span></h3>
            <button id="checkout_button" th:onclick="${credentials != null} ? 'checkout()' : 'checkoutAlert()'">Checkout</button>
        </div>
    </div>

    <footer id="footer">
        <p>Stay at homies &diams; 2021</p>
    </footer>
</body>
</html>